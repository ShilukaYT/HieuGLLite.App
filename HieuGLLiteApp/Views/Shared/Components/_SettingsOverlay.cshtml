<script type="text/x-template" id="settings-overlay-template">
    <div class="modal-overlay" @@.self="$emit('close')">

        <div class="settings-panel">
            <div class="btn-close-circle" @@="$emit('close')">
                <i class="fa fa-times"></i>
            </div>

            <h2 style="color: var(--primary-color); margin-bottom: 30px;">
                <i class="fa fa-cog"></i> CẤU HÌNH GIẢ LẬP
            </h2>

            <div class="settings-content">

                <div class="setting-item">
                    <label><i class="fa fa-microchip"></i> Số lõi CPU (Cores)</label>
                    <select class="hoyo-input" v-model="config.cpu">
                        <option value="2">2 Cores (Thấp)</option>
                        <option value="4">4 Cores (Trung bình)</option>
                        <option value="6">6 Cores (Cao)</option>
                    </select>
                </div>

                <div class="setting-item">
                    <label><i class="fa fa-memory"></i> Dung lượng RAM (MB)</label>
                    <select class="hoyo-input" v-model="config.ram">
                        <option value="2048">2048 MB</option>
                        <option value="4096">4096 MB</option>
                        <option value="8192">8192 MB</option>
                    </select>
                </div>

                <div class="setting-item">
                    <label><i class="fa fa-desktop"></i> Độ phân giải</label>
                    <select class="hoyo-input" v-model="config.resolution">
                        <option value="1280x720">1280 x 720 (16:9)</option>
                        <option value="1600x900">1600 x 900 (16:9)</option>
                        <option value="1920x1080">1920 x 1080 (FHD)</option>
                    </select>
                </div>

                <div class="setting-item" style="display: flex; justify-content: space-between; align-items: center;">
                    <label style="margin: 0;">Chế độ Render (Vulkan)</label>
                    <input type="checkbox" v-model="config.useVulkan" />
                </div>

            </div>

            <div style="margin-top: 40px;">
                <button class="btn-play" style="width: 100%; justify-content: center;" @@="saveConfig">
                    LƯU THIẾT LẬP
                </button>
            </div>
        </div>
    </div>
</script>

<script>
    const SettingsOverlay = {
        template: '#settings-overlay-template',
        data() {
            return {
                // Các giá trị mặc định
                config: {
                    cpu: "4",
                    ram: "4096",
                    resolution: "1600x900",
                    useVulkan: false
                }
            }
        },
        methods: {
            saveConfig() {
                // Gửi cấu hình về cho WinForms xử lý (Lưu vào file JSON hoặc Registry)
                const payload = {
                    type: "SAVE_SETTINGS",
                    data: this.config
                };

                if (window.chrome && window.chrome.webview) {
                    window.chrome.webview.postMessage(payload);
                }

                alert("Đã lưu cấu hình giả lập!");
                this.$emit('close');
            }
        }
    };
</script>