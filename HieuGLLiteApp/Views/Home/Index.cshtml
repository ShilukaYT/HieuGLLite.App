@{
	Layout = null;
}
<link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />

<div id="app">
    <sidebar-comp v-model="selectedGame"
                  :games="games"
                  @@open-login ="showLogin = true"
                  @@open-settings ="showSettings = true">
    </sidebar-comp>

    <game-page :game="selectedGame"
               @@action ="handleGameAction">
    </game-page>

    <login-modal :show="showLogin"
                 @@close ="showLogin = false">
    </login-modal>

    <settings-overlay v-if="showSettings"
                      @@close ="showSettings = false">
    </settings-overlay>
</div>

@Html.Partial("Components/_Sidebar")
@Html.Partial("Components/_GamePage")
@Html.Partial("Components/_LoginModal")
@Html.Partial("Components/_SettingsOverlay")
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script>

    const { createApp, ref } = Vue;

    const app = createApp({
        setup() {
                const games = [
        {
            id: "bs_tweaker",
            name: "BlueStacks 5",
            desc: "Trình giả lập Android nhanh nhất thế giới cho PC. Chiến game mobile mượt mà.",
            bg: "https://cdn.tgdd.vn/News/0/thumb-1280x720-37.jpg",
            icon: "https://cdn-icons-png.flaticon.com/512/888/888857.png",
            status: "install" // Trạng thái: Tải về
        },
        {
            id: "ld_player",
            name: "Honkai: Star Rail",
            desc: "Chuyến tàu khai phá ngân hà. Game nhập vai chiến thuật theo lượt mới nhất.",
            bg: "https://storage-asset.msi.com/event/2024/Corp/MSI-App-Player/images/App_Player_kv.jpg",
            icon: "https://upload.wikimedia.org/wikipedia/en/thumb/8/87/Star_Rail_icon.png/150px-Star_Rail_icon.png",
            status: "play" // Trạng thái: Chơi ngay
        }
    ];// Data lấy từ API
            const selectedGame = ref(games.value[0]);
            const showLogin = ref(false);
            const showSettings = ref(false);

            const handleGameAction = (game) => {
                // Gửi lệnh xuống WinForms Webview2
                window.chrome.webview.postMessage({ action: game.status, id: game.id });
            };

            return { games, selectedGame, showLogin, showSettings, handleGameAction };
        }
    });

    // Đăng ký component
    app.component('sidebar-comp', { props: ['games', 'modelValue'], template: '#sidebar-template' });
    app.component('game-page', { /* logic computed cho button ở đây */ template: '#game-page-template' });
    app.component('login-modal', { props: ['show'], template: '#login-modal-template' });

    app.mount('#app');
</script>